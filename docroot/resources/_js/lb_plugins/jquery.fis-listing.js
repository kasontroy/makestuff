/**
*  Ajax Autocomplete for jQuery, version 1.1.3
*  (c) 2010 Tomas Kirda
*
*  Ajax Autocomplete for jQuery is freely distributable under the terms of an MIT-style license.
*  For details, see the web site: http://www.devbridge.com/projects/autocomplete/jquery/
*
*  Last Review: 04/19/2010
*/
(function(d){var b=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g");function c(h,g,e){var f="("+e.replace(b,"\\$1")+")";return h.replace(new RegExp(f,"gi"),'<span class="autocomplete-high">$1</span>')}function a(f,e){this.el=d(f);this.el.attr("autocomplete","off");this.suggestions=[];this.data=[];this.badQueries=[];this.selectedIndex=-1;this.currentValue=this.el.val();this.intervalId=0;this.cachedResponse=new Array();this.onChangeInterval=null;this.ignoreValueChange=false;this.serviceUrl=e.serviceUrl;this.isLocal=false;this.currentRequest="";this.options={autoSubmit:false,minChars:1,maxHeight:300,deferRequestBy:0,width:0,highlight:true,params:{},fnFormatResult:c,delimiter:null,zIndex:9999,appendTo:null,hideOnKey:null};this.setOptions(e);this.initialize()}d.fn.FISautocomplete=function(e){return new a(this.get(0)||d("<input />"),e)};a.prototype={killerFn:null,initialize:function(){var g,e,f;g=this;e=Math.floor(Math.random()*1048576).toString(16);f="Autocomplete_"+e;this.killerFn=function(h){if(d(h.target).parents(".autocomplete").size()===0){g.killSuggestions();g.disableKillerFn()}};if(!this.options.width){this.options.width=this.el.width()}this.mainContainerId="AutocompleteContainter_"+e;d("#"+this.options.appendTo+"").html('<div id="'+this.mainContainerId+'" style="z-index:9999;"><div class="autocomplete-w1"><div class="autocomplete" id="'+f+'" style="display:none;"></div></div></div>');this.container=d("#"+f);if(window.opera){this.el.keypress(function(h){g.onKeyPress(h)})}else{this.el.keydown(function(h){g.onKeyPress(h)})}this.el.keyup(function(h){g.onKeyUp(h)});this.el.blur(function(){g.enableKillerFn()});this.el.focus(function(){g.fixPosition()})},setOptions:function(e){var f=this.options;d.extend(f,e);if(f.lookup){this.isLocal=true;if(d.isArray(f.lookup)){f.lookup={suggestions:f.lookup,data:[]}}}},clearCache:function(){this.cachedResponse=new Array();this.badQueries=[]},disable:function(){this.disabled=true},enable:function(){this.disabled=false},fixPosition:function(){var e=this.el.offset();d("#"+this.mainContainerId).css({top:(e.top+this.el.innerHeight())+"px",left:e.left+"px"})},enableKillerFn:function(){var e=this},disableKillerFn:function(){var e=this},killSuggestions:function(){var e=this;this.stopKillSuggestions();this.intervalId=window.setInterval(function(){e.hide();e.stopKillSuggestions()},300)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},onKeyPress:function(f){if(this.disabled||!this.enabled){return}switch(f.keyCode){case 27:this.el.val(this.currentValue);this.hide();break;case 9:case 13:if(this.selectedIndex===-1){this.hide();return}this.select(this.selectedIndex);if(f.keyCode===9){return}break;case 38:this.moveUp();break;case 40:this.moveDown();break;default:return}f.stopImmediatePropagation();f.preventDefault()},onKeyUp:function(g){if(this.disabled){return}switch(g.keyCode){case 38:case 40:return}clearInterval(this.onChangeInterval);if(this.currentValue!==this.el.val()){if(this.options.deferRequestBy>0){var f=this;this.onChangeInterval=setInterval(function(){f.onValueChange()},this.options.deferRequestBy)}else{this.onValueChange()}}},onValueChange:function(){clearInterval(this.onChangeInterval);this.currentValue=this.el.val();var e=this.getQuery(this.currentValue);this.selectedIndex=-1;if(this.ignoreValueChange){this.ignoreValueChange=false;return}if(e===""||e.length<this.options.minChars){this.hide()}else{this.getSuggestions(e)}},getQuery:function(g){var f,e;f=this.options.delimiter;if(!f){return d.trim(g)}e=g.split(f);return d.trim(e[e.length-1])},getSuggestionsLocal:function(j){var g,f,e,k,h;f=this.options.lookup;e=f.suggestions.length;g={suggestions:[],data:[]};j=j.toLowerCase();for(h=0;h<e;h++){k=f.suggestions[h];if(k.toLowerCase().indexOf(j)===0){g.suggestions.push(k);g.data.push(f.data[h])}}return g},getSuggestions:function(g){var f,e;f=this.isLocal?this.getSuggestionsLocal(g):this.cachedResponse[g];this.currentRequest=g;if(f){this.data=f;this.suggest()}else{if(!this.isBadQuery(g)){e=this;e.options.params.query=g;d.get(this.serviceUrl,e.options.params,function(h){e.processResponse(h)},"text")}}},isBadQuery:function(f){var e=this.badQueries.length;while(e--){if(f.indexOf(this.badQueries[e])===0){return true}}return false},hide:function(){this.enabled=false;this.selectedIndex=-1;this.container.hide();d("#"+this.options.appendTo+"").hide()},suggest:function(){if(this.options.hideOnKey){d("#"+this.options.hideOnKey).hide()}d("#"+this.options.appendTo+"").show();if(this.data==""){d("#"+this.options.appendTo+"").hide();this.hide();return}var m,l,e,k,n,h,o,j,g;m=this;l=this.suggestions.length;k=this.options.fnFormatResult;n=this.getQuery(this.currentValue);j=function(f){return function(){m.activate(f)}};g=function(f){return function(){m.select(f)}};this.container.hide().empty();this.container.html(this.data+'<p class="see-all floatLeft"><a href="javascript:void(0);" onclick="window.location.href=\'/fis/search.html?q='+this.currentRequest+'\'"><strong>See All Results</strong></a></p><p class="close-window floatRight"><a href="javascript:void(0);" onclick="$(\'#'+this.options.appendTo+"').hide();\">Close Window</a></p>");this.enabled=true;this.container.show()},processResponse:function(f){var e;e=f;if(!d.isArray(e.data)){e.data=[]}if(!this.options.noCache){this.cachedResponse[this.currentRequest]=e}this.data=e;this.suggest()},activate:function(e){var f,g;f=this.container.children();if(this.selectedIndex!==-1&&f.length>this.selectedIndex){d(f.get(this.selectedIndex)).removeClass()}this.selectedIndex=e;if(this.selectedIndex!==-1&&f.length>this.selectedIndex){g=f.get(this.selectedIndex);d(g).addClass("selected")}return g},deactivate:function(f,e){f.className="";if(this.selectedIndex===e){this.selectedIndex=-1}},select:function(g){var e,h;e=this.suggestions[g];if(e){this.el.val(e);if(this.options.autoSubmit){h=this.el.parents("form");if(h.length>0){h.get(0).submit()}}this.ignoreValueChange=true;this.hide();this.onSelect(g)}},moveUp:function(){if(this.selectedIndex===-1){return}if(this.selectedIndex===0){this.container.children().get(0).className="";this.selectedIndex=-1;this.el.val(this.currentValue);return}this.adjustScroll(this.selectedIndex-1)},moveDown:function(){if(this.selectedIndex===(this.suggestions.length-1)){return}this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(e){var j,f,g,h;j=this.activate(e);f=j.offsetTop;g=this.container.scrollTop();h=g+this.options.maxHeight-25;if(f<g){this.container.scrollTop(f)}else{if(f>h){this.container.scrollTop(f-this.options.maxHeight+25)}}this.el.val(this.getValue(this.suggestions[e]))},onSelect:function(e){var h,g,f,j;h=this;g=h.options.onSelect;f=h.suggestions[e];j=h.data[e];h.el.val(h.getValue(f));if(d.isFunction(g)){g(f,j,h.el)}},getValue:function(i){var f,h,e,g;g=this;f=g.options.delimiter;if(!f){return i}h=g.currentValue;e=h.split(f);if(e.length===1){return i}return h.substr(0,h.length-e[e.length-1].length)+i}}}(jQuery));(function(a){a.fn.fis_hover=function(b){var d=this;var c=a.extend({},a.fn.fis_hover.defaultOptions,b);return d.each(function(){a(".faculty-hover",a(this)).each(function(){var e=a(this).attr("id");var f=a(this);a("span",a(this)).hoverIntent({over:function(){var g='<div class="loading"><img src="/resources/images/fis-hover-loader.gif" alt="Loading..." /></div>';if(a.fn.fis_hover.cachedResponse[e]){g=a.fn.fis_hover.cachedResponse[e]}else{a.get("/ajax/facultyHover.html?id="+e+"",function(h){a.fn.fis_hover.cachedResponse[e]=h;a("#fisHoverResult_"+e+"").html(h)})}a(".appendFISHover").remove();a(this).append("<div class='appendFISHover' id='appendHover_"+e+"'><div class='details'><p class='close'><a href='javascript:void(0);' onclick=\"$.fis_hover('close');\">Close Window</a></p><span id=\"fisHoverResult_"+e+'">'+g+"</span></div></div>")},timeout:1000,out:function(){a("#appendHover_"+e+"").remove()}})})})};a.fn.fis_hover.cachedResponse=new Array();a.fis_hover=function(b){if(b=="close"){a(".appendFISHover").remove()}};a.fn.fis_hover.defaultOptions={}})(jQuery);(function(a){a.fn.listing_instant=function(b){var c=a.extend({},a.fn.listing_instant.defaultOptions,b);var d=a("."+c.listResults);a(this).keyup(function(){var e=a(this).val().toLowerCase();a(".list-item",a(d)).each(function(){if(e==""){a(this).removeClass("no-match");a(this).removeClass("has-match")}else{var g="";if(a("a",a(this))){g=a("a",a(this)).val()}var f=false;if(g){if(g.toLowerCase().indexOf(e)===-1){f=false}else{f=true}}else{g=a(this).html();if(g){if(g.toLowerCase().indexOf(e)===-1){f=false}else{f=true}}}if(!f){a(this).addClass("no-match");a(this).removeClass("has-match")}else{a(this).removeClass("no-match");a(this).addClass("has-match")}}})})};a.listing_instant=function(b){};a.fn.listing_instant.defaultOptions={listResults:""}})(jQuery);(function(a){a.fn.listing_application=function(b){this.options=a.extend({},a.fn.listing_application.defaultOptions,b);var d=this;var c=a("#"+this.options.listResults);a(this).click(function(){if(!a(".department-search .results").hasClass("current")){a(".department-search .results").addClass("current")}});a("#"+this.options.toggleOption+"").change(function(){d.options.dataFeed=d.options[a(this).val()];d.PerformSearch()});a(this).keyup(function(){d.PerformSearch()});this.PerformSearch=function(){var k=a("#"+this.options.listResults);var f=a(this).val().toLowerCase();for(var g=0;g<d.options.dataFeed.length;g++){d.options.dataFeed[g].found=false;if(d.options.dataFeed[g].title.toLowerCase().indexOf(f)!==-1){d.options.dataFeed[g].found=true;if(d.options.dataFeed[g].parentId){d.AddParent(d.options.dataFeed[g].parentId)}}}var j="";var h=new Array();a.each(d.options.dataFeed,function(q,p){if(p.found){h.push(p)}});var e=Math.ceil(h.length/3);var o=e;var n=e+e;var m=h.length;if(h.length>=30){e=Math.ceil(h.length/3);o=e;n=e+e;m=h.length}else{if(h.length>=20){e=Math.ceil(h.length/2);m=0;o=e;n=h.length}else{o=h.length;n=0;m=0}}if(h.length==0){a(".department-search .results").removeClass("current")}else{a(".department-search .results").addClass("current")}j+='<ul class="results-list no-margin">';for(var g=0;g<o;g++){var l=""+h[g].title+"";if(h[g].link){l='<a href="javascript:void(0);" onclick="window.location.href=\''+h[g].link+"';\">"+h[g].title+"</a>"}j+='<li class="results-list-tier'+h[g].tier+'">'+l+"</li>"}j+="</ul>";if(n!=0){j+='<ul class="results-list">';for(var g=o;g<n;g++){var l=""+h[g].title+"";if(h[g].link){l='<a href="javascript:void(0);" onclick="window.location.href=\''+h[g].link+"';\">"+h[g].title+"</a>"}j+='<li class="results-list-tier'+h[g].tier+'">'+l+"</li>"}j+="</ul>"}if(m!=0){j+='<ul class="results-list">';for(var g=n;g<m;g++){var l=""+h[g].title+"";if(h[g].link){l='<a href="javascript:void(0);" onclick="window.location.href=\''+h[g].link+"';\">"+h[g].title+"</a>"}j+='<li class="results-list-tier'+h[g].tier+'">'+l+"</li>"}j+="</ul>"}k.html(j)};this.Init=function(){var j=a("#"+d.options.listResults);var o=a("#"+this.options.toggleOption+"").val();d.options.dataFeed=d.options[o];var g=d.options.dataFeed;var e=Math.ceil(d.options.dataFeed.length/3);var n=e;var m=e+e;var l=g.length;var h="";h+='<ul class="results-list no-margin">';for(var f=0;f<n;f++){var k=""+g[f].title+"";if(g[f].link){k='<a href="javascript:void(0);" onclick="window.location.href=\''+g[f].link+"'\">"+g[f].title+"</a>"}h+='<li class="results-list-tier'+g[f].tier+'">'+k+"</li>"}h+="</ul>";if(m!=0){h+='<ul class="results-list">';for(var f=n;f<m;f++){var k=""+g[f].title+"";if(g[f].link){k='<a href="javascript:void(0);" onclick="window.location.href=\''+g[f].link+"'\">"+g[f].title+"</a>"}h+='<li class="results-list-tier'+g[f].tier+'">'+k+"</li>"}h+="</ul>"}if(l!=0){h+='<ul class="results-list">';for(var f=m;f<l;f++){var k=""+g[f].title+"";if(g[f].link){k='<a href="javascript:void(0);" onclick="window.location.href=\''+g[f].link+"'\">"+g[f].title+"</a>"}h+='<li class="results-list-tier'+g[f].tier+'">'+k+"</li>"}h+="</ul>"}j.html(h)};this.LookupItem=function(f){for(var e=0;e<d.options.dataFeed.length;e++){if(d.options.dataFeed[e].id==f){return d.options.dataFeed[e]}}};this.AddParent=function(f){for(var e=0;e<d.options.dataFeed.length;e++){if(d.options.dataFeed[e].id==f){d.options.dataFeed[e].found=true;if(d.options.dataFeed[e].parentId){d.AddParent(d.options.dataFeed[e].parentId)}}}};d.Init()};a.listing_application=function(b){};a.fn.listing_application.defaultOptions={listResults:"",toggleOption:"",dataFeed:[]}})(jQuery);